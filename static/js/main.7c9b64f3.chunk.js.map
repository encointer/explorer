{"version":3,"sources":["config/index.js","substrate-lib/SubstrateContext.js","substrate-lib/useSubstrate.js","substrate-lib/utils.js","substrate-lib/components/DeveloperConsole.js","map/MapMenu.js","map/CeremonyPhaseTimer.jsx","map/MapCeremonyPhases.jsx","map/MapNodeInfo.js","map/MapControl.js","utils.js","map/MapSidebar.js","map/CommunitiesClusters.js","map/LocationsLayer.js","Map.js","App.js","index.js"],"names":["configEnv","require","envVars","reduce","mem","n","undefined","process","slice","config","configCommon","connectedSocket","queryString","parse","window","location","search","rpc","PROVIDER_SOCKET","console","log","INIT_STATE","socket","types","CUSTOM_TYPES","keyring","keyringState","api","apiState","reducer","state","action","type","payload","Error","SubstrateContext","React","createContext","SubstrateContextProvider","props","initState","forEach","key","useReducer","dispatch","Provider","value","children","useSubstrate","useContext","connect","useCallback","a","provider","WsProvider","_api","ApiPromise","on","isReady","then","loadAccounts","web3Enable","APP_NAME","web3Accounts","allAccounts","map","address","meta","name","source","loadAll","isDevelopment","DEVELOPMENT_KEYRING","error","useEffect","toFormat","BigJS","DeveloperConsole","util","util_crypto","MapMenu","Sidebar","as","Menu","animation","direction","icon","inverted","vertical","visible","width","Item","href","target","Icon","phaseTimestampToTimer","timestamp","timeSec","Date","now","toString","padStart","CeremonyPhaseTimer","nextPhaseTimestamp","useState","timer","setTimer","id","setInterval","clearInterval","Fragment","ceremonyPhases","formatStartingAt","toLocaleString","formatDate","CeremonyPhases","small","query","encointerScheduler","getCurrentPhase","currentPhase","getNextPhaseTimestamp","setNextPhaseTimestamp","setCurrentPhase","unsubscribeAll","queryMulti","newPhase","newPhaseTimestamp","toNumber","unsub","catch","Step","Group","ordered","unstackable","className","join","size","phase","phasesProps","idx","active","concat","toLowerCase","filter","prop","reverse","phasesSteps","Content","Title","Description","MapCeremonyPhases","Blocks","memo","blockNumber","setBlockNumber","bestNumber","finalized","derive","chain","bestNumberFinalized","_","CeremonyIndex","getCurrentCeremonyIndex","currentCeremonyIndex","setCurrentCeremonyIndex","newCeremonyIndex","MapNodeInfoMain","nodeInfo","setNodeInfo","Promise","all","system","version","nodeName","nodeVersion","getInfo","Card","style","Header","Meta","MapNodeInfo","MapControl","loading","onZoomIn","onZoomOut","onClick","stackable","Button","disabled","compact","parserFixPoint","upper","lower","len","assert","raw","precision","bitLength","bits","lowerBits","length","floatPart","split","acc","bit","upperBits","decimalPart","parseInt","negative","parseI32F32","parseI64F64","mapReduce","arr","mapperFn","reducerFn","result","batchFetch","apiMethod","ids","it","responses","BigFormat","Big","MapSidebarMain","debug","onClose","onShow","hash","data","cid","demurrage","ref","useRef","isVertical","bootstrappers","setBootstrappers","moneysupply","setMoneysupply","encointerCurrencies","toJSON","encointerBalances","totalIssuance","get","Segment","current","padded","textAlign","sub","Message","color","toFixed","List","stacked","content","labelPosition","MapBlockNumber","DivIcon","L","iconSize","html","selectedIcon","CommunitiesClusters","cids","selected","sourceTarget","options","alt","gps","isSelected","Marker","position","Tooltip","offset","mark","iconUrl","shadowUrl","iconAnchor","popupAnchor","shadowSize","LocationsLayer","coords","pos","initialPosition","parseLatLng","toLatLng","lat","lon","parseDemurrage","Math","exp","tileSetup","url","attribution","MapMain","mapRef","ui","setUI","setCids","setHash","setData","setPosition","ec","kvReducer","locations","currencyProperties","properties","getCenter","demurrage_per_block","name_utf8","handlerZoom","s","leafletElement","currencyIdentifiers","bs58","err","fetchGeodataPar","locate","setTimeout","invalidateSize","sidebarSize","Responsive","fireOnMount","onUpdate","portrait","onlyMobile","maxWidth","Pushable","menu","setZoom","prevZoom","Pusher","marginRight","display","center","zoom","zoomControl","touchZoom","height","container","offsetHeight","calcMapOffset","onLocationFound","e","latlng","flyTo","TileLayer","getZoom","bounds","pad","fitBounds","Map","Main","loader","text","Dimmer","Loader","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7c9b64f3.chunk.js","sourcesContent":["import configCommon from './common.json';\n// Using `require` as `import` does not support dynamic loading (yet).\nconst configEnv = require(`./${process.env.NODE_ENV}.json`);\n\n// Accepting React env vars and aggregating them into `config` object.\nconst envVarNames = [\n  'REACT_APP_PROVIDER_SOCKET',\n  'REACT_APP_DEVELOPMENT_KEYRING'\n];\nconst envVars = envVarNames.reduce((mem, n) => {\n  // Remove the `REACT_APP_` prefix\n  if (process.env[n] !== undefined) mem[n.slice(10)] = process.env[n];\n  return mem;\n}, {});\n\nconst config = { ...configCommon, ...configEnv, ...envVars };\nexport default config;\n","import React, { useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport queryString from 'query-string';\nimport config from '../config';\n\nconst parsedQuery = queryString.parse(window.location.search);\nconst connectedSocket = parsedQuery.rpc || config.PROVIDER_SOCKET;\nconsole.log(`Connected socket: ${connectedSocket}`);\n\nconst INIT_STATE = {\n  socket: connectedSocket,\n  types: config.CUSTOM_TYPES,\n  keyring: null,\n  keyringState: null,\n  api: null,\n  apiState: null\n};\n\nconst reducer = (state, action) => {\n  let socket = null;\n\n  switch (action.type) {\n    case 'RESET_SOCKET':\n      socket = action.payload || state.socket;\n      return { ...state, socket, api: null, apiState: null };\n\n    case 'CONNECT':\n      return { ...state, api: action.payload, apiState: 'CONNECTING' };\n\n    case 'CONNECT_SUCCESS':\n      return { ...state, apiState: 'READY' };\n\n    case 'CONNECT_ERROR':\n      return { ...state, apiState: 'ERROR' };\n\n    case 'SET_KEYRING':\n      return { ...state, keyring: action.payload, keyringState: 'READY' };\n\n    case 'KEYRING_ERROR':\n      return { ...state, keyring: null, keyringState: 'ERROR' };\n\n    default:\n      throw new Error(`Unknown type: ${action.type}`);\n  }\n};\n\nconst SubstrateContext = React.createContext();\n\nconst SubstrateContextProvider = (props) => {\n  // filtering props and merge with default param value\n  const initState = { ...INIT_STATE };\n  const neededPropNames = ['socket', 'types'];\n  neededPropNames.forEach(key => {\n    initState[key] = (typeof props[key] === 'undefined' ? initState[key] : props[key]);\n  });\n  const [state, dispatch] = useReducer(reducer, initState);\n\n  return (\n    <SubstrateContext.Provider value={[state, dispatch]}>\n      {props.children}\n    </SubstrateContext.Provider>\n  );\n};\n\n// prop typechecking\nSubstrateContextProvider.propTypes = {\n  socket: PropTypes.string,\n  types: PropTypes.object\n};\n\nexport { SubstrateContext, SubstrateContextProvider };\n","import { useContext, useEffect, useCallback } from 'react';\nimport { ApiPromise, WsProvider } from '@polkadot/api';\nimport { web3Accounts, web3Enable } from '@polkadot/extension-dapp';\nimport keyring from '@polkadot/ui-keyring';\n\nimport config from '../config';\nimport { SubstrateContext } from './SubstrateContext';\n\nconst useSubstrate = () => {\n  const [state, dispatch] = useContext(SubstrateContext);\n\n  // `useCallback` so that returning memoized function and not created\n  //   everytime, and thus re-render.\n  const { api, socket, types } = state;\n  const connect = useCallback(async () => {\n    if (api) return;\n\n    const provider = new WsProvider(socket);\n    const _api = new ApiPromise({ provider, types });\n\n    // We want to listen to event for disconnection and reconnection.\n    //  That's why we set for listeners.\n    _api.on('connected', () => {\n      dispatch({ type: 'CONNECT', payload: _api });\n      // `ready` event is not emitted upon reconnection. So we check explicitly here.\n      _api.isReady.then((_api) => dispatch({ type: 'CONNECT_SUCCESS' }));\n    });\n    _api.on('ready', () => dispatch({ type: 'CONNECT_SUCCESS' }));\n    _api.on('error', () => dispatch({ type: 'CONNECT_ERROR' }));\n  }, [api, socket, types, dispatch]);\n\n  // hook to get injected accounts\n  const { keyringState } = state;\n  const loadAccounts = useCallback(async () => {\n    // Ensure the method only run once.\n    if (keyringState) return;\n\n    try {\n      await web3Enable(config.APP_NAME);\n      let allAccounts = await web3Accounts();\n      allAccounts = allAccounts.map(({ address, meta }) =>\n        ({ address, meta: { ...meta, name: `${meta.name} (${meta.source})` } }));\n\n      keyring.loadAll({ isDevelopment: config.DEVELOPMENT_KEYRING }, allAccounts);\n      dispatch({ type: 'SET_KEYRING', payload: keyring });\n    } catch (e) {\n      console.error(e);\n      dispatch({ type: 'KEYRING_ERROR' });\n    }\n  }, [keyringState, dispatch]);\n\n  useEffect(() => {\n    connect();\n  }, [connect]);\n\n  useEffect(() => {\n    loadAccounts();\n  }, [loadAccounts]);\n\n  return { ...state, dispatch };\n};\n\nexport default useSubstrate;\n","import BigJS from 'big.js';\nimport toFormat from 'toformat';\n\nconst Big = toFormat(BigJS);\n\nconst utils = {\n  prettyBalance: function (amt, opts = {}) {\n    if (typeof amt !== 'number' && typeof amt !== 'string') {\n      throw new Error(`${amt} is not a number`);\n    }\n\n    // default option values\n    opts = { power: 8, decimal: 2, unit: 'Units', ...opts };\n\n    const bn = Big(amt);\n    const divisor = Big(10).pow(opts.power);\n    const displayed = bn.div(divisor).toFormat(opts.decimal);\n    return `${displayed.toString()} ${opts.unit}`;\n  }\n};\n\nexport default utils;\n","// This component will simply add utility functions to your developer console.\nimport { useSubstrate } from '../';\n\nexport default function DeveloperConsole (props) {\n  const { api } = useSubstrate();\n  window.api = api;\n  window.util = require('@polkadot/util');\n  window.util_crypto = require('@polkadot/util-crypto');\n  window.keyring = require('@polkadot/keyring');\n\n  return null;\n}\n","import React from 'react';\nimport { Sidebar, Menu, Icon } from 'semantic-ui-react';\n\nexport default function MapMenu (props) {\n  return (\n    <Sidebar\n      as={Menu}\n      animation='overlay'\n      direction='left'\n      icon='labeled'\n      inverted\n      vertical\n      visible={props.visible}\n      width='thin'\n    >\n\n      <Menu.Item as='a' href='//encointer.org' target='_blank'>\n        <Icon name='book' />\n            Documentation\n      </Menu.Item>\n\n      <Menu.Item as='a' href='//encointer.org/testnet/' target='_blank' >\n        <Icon name='block layout' />\n            Testnet\n      </Menu.Item>\n\n      <Menu.Item as='a' href='//encointer.org/blog/' target='_blank'>\n        <Icon name='newspaper' />\n            Blog\n      </Menu.Item>\n\n      <Menu.Item as='a' href='//encointer.org/faq/' target='_blank'>\n        <Icon name='question circle' />\n            FAQ\n      </Menu.Item>\n\n      <Menu.Item as='a' href='//encointer.org/donate/' target='_blank'>\n        <Icon name='dollar' />\n           Donate\n      </Menu.Item>\n\n      <Menu.Item as='a' href='//encointer.org/about/' target='_blank'>\n        <Icon name='favorite' />\n           About\n      </Menu.Item>\n\n      <Menu.Item as='a' href='//github.com/encointer/encointer-node' target='_blank'>\n        <Icon name='github' />\n            Code\n      </Menu.Item>\n\n    </Sidebar>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nconst phaseTimestampToTimer = (timestamp) => {\n  const timeSec = ((timestamp - Date.now()) / 1000) | 0;\n  if (timeSec >= 0) {\n    return `${((timeSec / 60) | 0).toString().padStart(2, '0')}:${(timeSec % 60).toString().padStart(2, '0')}`;\n  } else {\n    return 'finished';\n  }\n};\n\nexport function CeremonyPhaseTimer (props) {\n  const { nextPhaseTimestamp } = props;\n  const [timer, setTimer] = useState('');\n\n  useEffect(() => {\n    setTimer(phaseTimestampToTimer(nextPhaseTimestamp));\n    const id = setInterval(() => {\n      setTimer(phaseTimestampToTimer(nextPhaseTimestamp));\n    }, 1000);\n    return () => clearInterval(id);\n  }, [nextPhaseTimestamp]);\n\n  return <React.Fragment>{timer}</React.Fragment>;\n}\n","import React, { useEffect, useState } from 'react';\nimport { Step } from 'semantic-ui-react';\nimport { useSubstrate } from '../substrate-lib';\nimport { CeremonyPhaseTimer } from './CeremonyPhaseTimer';\n\nconst ceremonyPhases = [\n  'REGISTERING',\n  'ASSIGNING',\n  'ATTESTING'\n];\n\nconst formatDate = (timestamp) => (new Date(timestamp)).toLocaleString();\n\nconst formatStartingAt = (timestamp) => (<div><div>starting at:</div> {formatDate(timestamp)}</div>);\n\nfunction CeremonyPhases (props) {\n  const { small } = props;\n  const { api } = useSubstrate();\n  const {\n    encointerScheduler: {\n      currentPhase: getCurrentPhase,\n      nextPhaseTimestamp: getNextPhaseTimestamp\n    }\n  } = api.query;\n  const [nextPhaseTimestamp, setNextPhaseTimestamp] = useState(0);\n  const [currentPhase, setCurrentPhase] = useState(-1);\n\n  const phasesSteps = phase => {\n    const phasesProps = (currentPhase === -1 ? [] : ceremonyPhases)\n      .map((phase, idx) => ({\n        key: ceremonyPhases[idx],\n        active: (idx === currentPhase),\n        className: 'step-'.concat(ceremonyPhases[idx]).toLowerCase()\n      })).filter((prop, idx) =>\n        !small || prop.active || idx === currentPhase + 1 || (idx === 0 && currentPhase === 2)\n      );\n    return (small && currentPhase === 2) ? phasesProps.reverse() : phasesProps;\n  };\n  useEffect(() => {\n    let unsubscribeAll = null;\n    api.queryMulti([\n      getCurrentPhase,\n      getNextPhaseTimestamp\n    ], ([newPhase, newPhaseTimestamp]) => {\n      setCurrentPhase(newPhase.toNumber());\n      setNextPhaseTimestamp(newPhaseTimestamp.toNumber());\n    })\n      .then(unsub => {\n        unsubscribeAll = unsub;\n      })\n      .catch(console.error);\n\n    return () => unsubscribeAll && unsubscribeAll();\n  }, [api, getCurrentPhase, getNextPhaseTimestamp]);\n\n  return (\n    <Step.Group\n      ordered\n      unstackable\n      className={[\n        ceremonyPhases[currentPhase],\n        small ? 'small-screen' : ''\n      ].join(' ')}\n      size='mini'>{\n        phasesSteps(currentPhase)\n          .map((props, idx) => (\n            <Step {...props}>\n              <Step.Content>\n                <Step.Title>{props.key}</Step.Title>\n                <Step.Description>{\n                  (props.active)\n                    ? <div><div>time left: </div><CeremonyPhaseTimer nextPhaseTimestamp={nextPhaseTimestamp} /></div>\n                    : (small\n                      ? formatStartingAt(nextPhaseTimestamp)\n                      : ((idx === (currentPhase + 1) ||\n                          (idx === 0 && currentPhase === 2))\n                        ? formatStartingAt(nextPhaseTimestamp)\n                        : null))\n                }</Step.Description>\n              </Step.Content>\n            </Step>\n          ))\n      }</Step.Group>\n  );\n}\n\nexport default function MapCeremonyPhases (props) {\n  const { api } = useSubstrate();\n  return api && api.query &&\n    api.query.encointerScheduler &&\n    api.query.encointerScheduler.nextPhaseTimestamp &&\n    api.query.encointerScheduler.currentPhase ? (\n      <div className='encointer-map-ceremony-phase'>\n        <CeremonyPhases {...props} />\n      </div>\n    ) : null;\n}\n","import React, { useEffect, useState } from 'react';\nimport { Card } from 'semantic-ui-react';\n\nimport { useSubstrate } from '../substrate-lib';\n\nconst Blocks = React.memo(props => {\n  const { api } = useSubstrate();\n  const [blockNumber, setBlockNumber] = useState(0);\n  const bestNumber = props.finalized\n    ? api.derive.chain.bestNumberFinalized\n    : api.derive.chain.bestNumber;\n  useEffect(() => {\n    let unsubscribeAll;\n    bestNumber(blockNumber => {\n      setBlockNumber(blockNumber.toNumber());\n    }).then(unsub => {\n      unsubscribeAll = unsub;\n    })\n      .catch(console.error);\n    return () => unsubscribeAll && unsubscribeAll();\n  }, [bestNumber]);\n  return <React.Fragment>{blockNumber}</React.Fragment>;\n}, _ => true);\n\nconst CeremonyIndex = React.memo(props => {\n  const {\n    api: {\n      query: {\n        encointerScheduler: {\n          currentCeremonyIndex: getCurrentCeremonyIndex\n        }\n      }\n    }\n  } = useSubstrate();\n  const [currentCeremonyIndex, setCurrentCeremonyIndex] = useState(0);\n  useEffect(() => {\n    let unsubscribeAll;\n    getCurrentCeremonyIndex(newCeremonyIndex => {\n      setCurrentCeremonyIndex(newCeremonyIndex.toNumber());\n    }).then(unsub => {\n      unsubscribeAll = unsub;\n    })\n      .catch(console.error);\n    return () => unsubscribeAll && unsubscribeAll();\n  }, [getCurrentCeremonyIndex]);\n  return currentCeremonyIndex ? <React.Fragment>{currentCeremonyIndex}</React.Fragment> : null;\n}, _ => true);\n\nfunction MapNodeInfoMain (props) {\n  const { api } = useSubstrate();\n  const [nodeInfo, setNodeInfo] = useState({});\n\n  useEffect(() => {\n    const getInfo = async () => {\n      try {\n        const [chain, nodeName, nodeVersion] = await Promise.all([\n          api.rpc.system.chain(),\n          api.rpc.system.name(),\n          api.rpc.system.version()\n        ]);\n        setNodeInfo({ chain, nodeName, nodeVersion });\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    getInfo();\n  }, [api.rpc.system]);\n\n  return (nodeInfo.nodeName\n    ? <Card className='encointer-map-node-info' style={props.style || {}}>\n      <Card.Content>\n        <Card.Header>{nodeInfo.nodeName}</Card.Header>\n        <Card.Meta>{`${nodeInfo.chain || ''} v${nodeInfo.nodeVersion}`}</Card.Meta>\n      </Card.Content>\n\n      <Card.Content className='blocks'>\n        <Card.Meta></Card.Meta>\n        <div className='block-current'>current block #<Blocks /></div>\n        <div className='finalized-current'>finalized block #<Blocks finalized /></div>\n        <div className='ceremony'><span>ceremony</span> <strong> #<CeremonyIndex /></strong></div>\n      </Card.Content>\n    </Card>\n    : null);\n}\n\nexport default function MapNodeInfo (props) {\n  const { api } = useSubstrate();\n  return api.query &&\n    api.query.encointerScheduler &&\n    api.query.encointerScheduler.currentCeremonyIndex &&\n    api.rpc &&\n    api.rpc.system &&\n    api.rpc.system.chain &&\n    api.rpc.system.name &&\n    api.rpc.system.version ? (\n      <MapNodeInfoMain {...props} />\n    ) : null;\n}\n","import React from 'react';\nimport { Button, Menu } from 'semantic-ui-react';\n\nexport default function MapControl (props) {\n  const { loading, onZoomIn, onZoomOut, onClick } = props;\n  return (\n    <Menu className='encointer-map-floating-widgets' stackable size='mini' vertical>\n      <Menu.Item >\n        <Button onClick={onClick} loading={loading} disabled={loading} icon='sidebar' className='encoiner-menu-button' />\n      </Menu.Item>\n      <Menu.Item >\n        <Button.Group vertical compact size='small'>\n          <Button icon='plus' onClick={onZoomIn}/>\n          <Button icon='minus' onClick={onZoomOut}/>\n        </Button.Group>\n      </Menu.Item>\n    </Menu>\n  );\n}\n","import assert from 'assert';\n\n/// Function to produce function to convert fixed-point to Number\n///\n/// Fixed interpretation of u<N> place values\n/// ... ___ ___ ___ ___ . ___ ___ ___ ___ ...\n/// ...  8   4   2   1    1/2 1/4 1/8 1/16...\n///\n/// Parameters:\n/// upper: 0..128 - number of bits in decimal part\n/// lower: 0..128 - number of bits in fractional part\n///\n/// Produced function parameters:\n/// raw: substrate_fixed::types::I<upper>F<lower> as I<upper+lower>\n/// precision: 0..lower number bits in fractional part to process\nexport function parserFixPoint (upper, lower) {\n  const len = upper + lower;\n  assert(len >= 8, `Bit length can't be less than 8, provided ${len}`);\n  assert(len <= 128, `Bit length can't be bigger than 128, provided ${len}`);\n  assert(!(len & (len - 1)), `Bit length should be power of 2, provided ${len}`);\n\n  return (raw, precision = lower) => {\n    assert(raw.bitLength() === len, 'Bit length is not equal to ' + len);\n    const bits = raw.toString(2, len);\n    const lowerBits = (lower > bits.length\n      ? bits.padStart(lower, '0')\n      : bits).slice(-lower, -1 * (lower - precision) || undefined);\n    const floatPart = lowerBits\n      .split('')\n      .reduce((acc, bit, idx) => {\n        acc = acc + (bit === '1' ? 1 / 2 ** (idx + 1) : 0);\n        return acc;\n      }, 0);\n    const upperBits = bits.slice(0, -lower);\n    const decimalPart = upperBits ? parseInt(upperBits, 2) : 0;\n    return decimalPart + (raw.negative ? -floatPart : floatPart);\n  };\n}\n\nexport const parseI4F4 = parserFixPoint(4, 4);\n\nexport const parseI8F8 = parserFixPoint(8, 8);\n\nexport const parseI16F16 = parserFixPoint(16, 16);\n\nexport const parseI32F32 = parserFixPoint(32, 32);\n\nexport const parseI64F64 = parserFixPoint(64, 64);\n\n/// map and reduce helper\nfunction mapReduce (arr, mapperFn, reducerFn) {\n  let result = arr;\n  if (mapperFn) {\n    result = result.map(mapperFn);\n  }\n  if (reducerFn) {\n    result = result.reduce(reducerFn, {});\n  }\n  return result;\n}\n\n/// Function that calls provided api method parameters provided in ids array\n/// Will return value when all promises finishes optionally converted with mapperFn\nexport async function batchFetch (apiMethod, ids, mapperFn, reducerFn) {\n  const responses = await Promise.all(ids.map(it => apiMethod(it))); // array of fetching promises\n  return mapReduce(responses, mapperFn, reducerFn); // Called when all promises fullfils\n}\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Button, Segment, Header, Icon, List, Message, Sidebar } from 'semantic-ui-react';\nimport Big from 'big.js';\nimport toFormat from 'toformat';\n\nimport { useSubstrate } from '../substrate-lib';\nimport { parseI64F64 } from '../utils';\n\nconst BigFormat = toFormat(Big);\n\nfunction MapSidebarMain (props) {\n  const {\n    debug, onClose, onShow, hash, direction, width, data: {\n      name, cid, demurrage\n    }\n  } = props;\n  const visible = !!hash.length;\n  const ref = useRef();\n  const isVertical = direction === 'top' || direction === 'bottom';\n\n  const { api } = useSubstrate();\n  const [bootstrappers, setBootstrappers] = useState([]);\n  const [moneysupply, setMoneysupply] = useState(null);\n\n  /// Fetch bootstrappers\n  useEffect(() => {\n    if (cid) {\n      debug && console.log('GETTING BOOTSTRAPPERS', cid);\n      api.query.encointerCurrencies\n        .bootstrappers(cid)\n        .then(_ => {\n          debug && console.log('BOOTSTRAPPERS RECEIVED', _);\n          setBootstrappers(_.toJSON());\n        });\n    }\n  }, [api.query.encointerCurrencies, cid, debug]);\n\n  /// Fetch money supply\n  useEffect(() => {\n    if (cid) {\n      debug && console.log('GETTING MONEYSUPPLY', cid);\n      api.query.encointerBalances\n        .totalIssuance(cid)\n        .then(_ => {\n          debug && console.log('MONEYSUPPLY RECEIVED', _);\n          setMoneysupply(parseI64F64(_.get('principal')));\n        });\n    }\n  }, [api.query.encointerBalances, cid, debug]);\n\n  /// Handler when sidebar completely shows (animation stops)\n  const handleShow = () => ref.current && onShow(ref.current.ref.current[\n    `offset${isVertical ? 'Height' : 'Width'}`\n  ]);\n\n  return (\n    <Sidebar\n      className='details-sidebar'\n      ref={ref}\n      as={Segment.Group}\n      animation='overlay'\n      icon='labeled'\n\n      direction={direction}\n      visible={visible}\n      width={width}\n      onShow={handleShow}\n    >\n      <Segment padded>\n        <Header>\n          <Icon name='money bill alternate' />\n          <Header.Content>Currency info</Header.Content>\n        </Header>\n      </Segment>\n\n      <Segment textAlign='center'>\n        <Header sub textAlign='left'>Currency ID:</Header>\n        <Message size='small' color='blue'>{hash}</Message>\n        <p>{name}</p>\n      </Segment>\n\n      <Segment.Group>\n\n        <Segment>\n          <Header sub>Demurrage rate (per month):</Header>\n          {demurrage && demurrage.toFixed(2)}%\n        </Segment>\n\n        <Segment loading={!bootstrappers.length}>\n          <Header sub>List of bootstrappers:</Header>\n          <List>{\n            bootstrappers.map(\n              _ => <List.Item key={_}>{_}</List.Item>\n            )\n          }</List>\n        </Segment>\n\n        <Segment loading={moneysupply === null} stacked>\n          <Header sub>Money supply:</Header>\n          <p>{ moneysupply && (new BigFormat(moneysupply)).toFormat(2) }</p>\n        </Segment>\n\n      </Segment.Group>\n\n      <Segment textAlign='right' className='map-sidebar-close'>\n        <Button\n          content='Close'\n          icon={'angle ' + (isVertical ? 'down' : 'right')}\n          labelPosition='right'\n          onClick={onClose}/>\n      </Segment>\n\n    </Sidebar>\n  );\n}\n\nexport default function MapBlockNumber (props) {\n  const { api } = useSubstrate();\n  return api.query &&\n    api.query.encointerCurrencies &&\n    api.query.encointerBalances ? (\n      <MapSidebarMain {...props} />\n    ) : null;\n}\n","import React from 'react';\nimport { Marker, Tooltip } from 'react-leaflet';\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport * as L from 'leaflet';\n\nconst DivIcon = L.divIcon;\nconst iconSize = [30, 30];\n\nconst icon = new DivIcon({\n  iconSize,\n  className: 'encoiner-community-icon',\n  html: '<i>$</i>'\n});\nconst selectedIcon = new DivIcon({\n  iconSize: [2, 2],\n  className: '',\n  html: ''\n});\n\n/// communities markers layer with clusterisation\nexport function CommunitiesClusters (props) {\n  const { cids, data, selected } = props;\n  const handleMarkerClick = _ => _.sourceTarget.options.alt && props.onClick(_.sourceTarget.options.alt);\n  return (<MarkerClusterGroup onClick={handleMarkerClick}> {\n    cids.map(cid => {\n      const { gps, name } = data[cid];\n      const isSelected = selected === cid;\n      return (\n        <Marker key={cid} position={gps} alt={cid} icon={ isSelected ? selectedIcon : icon } >\n          { !isSelected\n            ? <Tooltip direction='top' offset={[0, iconSize[1] / -2]}>{name}</Tooltip>\n            : null }\n        </Marker>\n      );\n    })\n  }</MarkerClusterGroup>);\n}\n","import React from 'react';\nimport { Marker } from 'react-leaflet';\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport * as L from 'leaflet';\n\nconst mark = new L.Icon({\n  iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41]\n});\n\n/// Markers layer\nexport function LocationsLayer (props) {\n  const { coords } = props.data;\n  if (!coords || !coords.length) {\n    return null;\n  }\n  return (<MarkerClusterGroup>{\n    coords.map((pos, idx) => (<Marker position={pos} key={idx} icon={mark}/>))\n  }</MarkerClusterGroup>);\n}\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Map as LMap, TileLayer } from 'react-leaflet';\nimport { Sidebar, Responsive, Segment } from 'semantic-ui-react';\nimport * as L from 'leaflet';\nimport * as bs58 from 'bs58';\n\nimport { useSubstrate } from './substrate-lib';\nimport { DeveloperConsole } from './substrate-lib/components';\n\nimport MapMenu from './map/MapMenu';\nimport MapCeremonyPhases from './map/MapCeremonyPhases';\nimport MapNodeInfo from './map/MapNodeInfo';\nimport MapControl from './map/MapControl';\nimport MapSidebar from './map/MapSidebar';\n\nimport { CommunitiesClusters } from './map/CommunitiesClusters';\nimport { LocationsLayer } from './map/LocationsLayer';\nimport { parseI32F32, parseI64F64, batchFetch } from './utils';\n\nimport 'leaflet/dist/leaflet.css';\nimport 'react-leaflet-markercluster/dist/styles.min.css';\n\nconst initialPosition = L.latLng(47.166168, 8.515495);\n\n/// Parse only 16 bits of fractional part\nconst parseLatLng = _ => parseI32F32(_, 16);\n\nconst toLatLng = location => [\n  parseLatLng(location.lat),\n  parseLatLng(location.lon)\n];\n\nconst BLOCKS_PER_MONTH = (86400 / 6) * (356 / 12);\n\nconst parseDemurrage = _ => (1 - Math.exp(-1 * parseI64F64(_) * BLOCKS_PER_MONTH)) * 100;\n\nconst tileSetup = {\n  url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  attribution: '&copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>'\n};\n\nfunction MapMain (props) {\n  const { debug } = props;\n  const mapRef = useRef();\n  const { api } = useSubstrate();\n\n  const [ui, setUI] = useState({ selected: '', loading: true });\n  const [cids, setCids] = useState([]);\n  const [hash, setHash] = useState([]);\n  const [data, setData] = useState({});\n  const [position, setPosition] = useState(initialPosition);\n\n  const ec = api && api.query && api.query.encointerCurrencies;\n\n  /// Fetch locations for each currency in paralel; Save to state once ready\n  async function fetchGeodataPar (cids, hash) { /* eslint-disable no-multi-spaces */\n    const kvReducer = (acc, data, idx) => { // conver array to key-value map\n      acc[hash[idx]] = data;                // where key is BASE58 of cid\n      return acc;\n    };\n\n    debug && console.log('FETCHING LOCATIONS AND PROPERTIES');\n    const [locations, properties] = await Promise.all([\n      await batchFetch(         // Fetching all Locations in parallel\n        ec.locations,           // API: encointerCurrencies.locations(cid) -> Vec<Location>\n        cids,                   // array of parameters to method\n        _ => _.map(toLatLng)    // convert Location from I32F32 to LatLng\n      ),                        // Fetching all Currency Properties\n      await batchFetch(ec.currencyProperties, cids)]);\n\n    debug && console.log('SETTING DATA', locations, properties);\n    setData(cids.map((cid, idx) => ({ // Shape of data in UI\n      cid,                            // cid for back-reference\n      coords: locations[idx],         // all coords\n      gps: L.latLngBounds(locations[idx]).getCenter(),\n      demurrage: parseDemurrage(properties[idx].demurrage_per_block),\n      name: properties[idx].name_utf8.toString()\n    })).reduce(kvReducer, {}));\n    setUI({ ...ui, loading: false });\n  }\n\n  /// Load currencies identifiers once\n  useEffect(() => {\n    if (cids.length === 0) {\n      ec.currencyIdentifiers()\n        .then(cids => {\n          setCids(cids);\n          setHash(cids.map(bs58.encode));\n        })\n        .catch(err => console.error(err));\n    }\n  }, [cids.length, ec]);\n\n  /// Get locations effect\n  useEffect(() => { /* eslint-disable react-hooks/exhaustive-deps */\n    if (cids.length && cids.length === hash.length) {\n      fetchGeodataPar(cids, hash);\n    }\n  }, [cids, hash]);\n\n  /// Attempt geolocation\n  useEffect(() => {\n    const map = mapRef.current;\n    if (map != null && position === initialPosition) {\n      map.leafletElement.locate();\n    }\n  }, [mapRef, position]);\n\n  /// Update map after resize\n  useEffect(_ => {\n    const map = mapRef.current && mapRef.current.leafletElement;\n    map && setTimeout(_ => map.invalidateSize(), 50);\n  }, [ui.sidebarSize]);\n\n  /// Handler generator for zoom in/out\n  function handlerZoom (s) {\n    return () => mapRef.current.leafletElement[s < 0 ? 'zoomOut' : 'zoomIn']();\n  }\n\n  /// Resize leaflet map when sidebar shown\n  function calcMapOffset () {\n    const full = '100%';\n    // should reposition markers in portrait mode if sidebar shown\n    if (ui.portrait && ui.selected && ui.sidebarSize && mapRef.current !== null) {\n      const offset = mapRef.current.container.offsetHeight - ui.sidebarSize;\n      return `${offset}px`;\n    }\n    return full;\n  }\n\n  /// Restet marker to my position\n  const handleLocationFound = e => {\n    setPosition(e.latlng);\n    const map = mapRef.current.leafletElement;\n    map.flyTo(e.latlng);\n    map.setZoom(8);\n  };\n\n  /// Handler for click on currency marker\n  const handleCurrencyMarkerClick = cid => {\n    const map = mapRef.current.leafletElement;\n    setUI({ ...ui, selected: cid, prevZoom: map.getZoom() });\n    const bounds = L.latLngBounds(data[cid].coords).pad(2);\n    map.fitBounds(bounds);\n  };\n\n  /// Handler for window resize\n  const handleResponsibleUpdate = (_, { width }) =>\n    setUI({ ...ui, portrait: width < Responsive.onlyMobile.maxWidth, width });\n\n  /// Handler for sidebar closing\n  const handleSidebarClosed = _ => {\n    const map = mapRef.current.leafletElement;\n    map.setZoom(ui.prevZoom);\n    setUI({ ...ui, selected: '', sidebarSize: 0 });\n  };\n\n  /// Handler for sidebar shows completely\n  const handleSidebarShow = sidebarSize =>\n    setUI({ ...ui, sidebarSize, menu: false });\n\n  /// Show left side menu\n  const toggleMenu = () =>\n    setUI({ ...ui, menu: !ui.menu });\n\n  /// Close left side menu if clicked\n  const handleMapClick = () =>\n    ui.menu && setUI({ ...ui, menu: false });\n\n  return (\n    <Responsive\n      as={Segment.Group}\n      className='encointer-map'\n      fireOnMount\n      onUpdate={handleResponsibleUpdate}>\n\n      <Sidebar.Pushable as={Segment}  className='component-wrapper'>\n\n        <MapMenu visible={ui.menu} />\n\n        <MapSidebar\n          onClose={handleSidebarClosed}\n          onShow={handleSidebarShow}\n          hash={ui.selected}\n          direction={ui.portrait ? 'bottom' : 'right'}\n          width='very wide'\n          data={data[ui.selected] || {}}\n          debug={debug}\n        />\n\n        <Sidebar.Pusher className='encointer-map-wrapper'\n          style={{ marginRight: ui.portrait ? '0' : ui.sidebarSize + 'px' }}>\n\n          <MapCeremonyPhases small={ui.portrait} />\n\n          <MapNodeInfo\n            style={ui.portrait && ui.selected ? { display: 'none' } : {}} />\n\n          <MapControl\n            onClick={toggleMenu}\n            loading={ui.loading}\n            onZoomIn={handlerZoom(1)}\n            onZoomOut={handlerZoom(-1)} />\n\n          <LMap\n            center={position}\n            zoom={4}\n            ref={mapRef}\n            zoomControl={false}\n            touchZoom={true}\n            onClick={handleMapClick}\n            style={{ height: calcMapOffset() }}\n            onLocationFound={handleLocationFound}>\n\n            <TileLayer {...tileSetup} />\n\n            { ui.selected\n              ? <LocationsLayer data={data[ui.selected]} />\n              : null }\n\n            { !ui.loading\n              ? <CommunitiesClusters\n                data={data}\n                cids={hash}\n                onClick={handleCurrencyMarkerClick}\n                selected={ui.selected} />\n              : null }\n\n          </LMap>\n\n        </Sidebar.Pusher>\n\n      </Sidebar.Pushable>\n\n      { debug\n        ? <DeveloperConsole />\n        : null }\n\n    </Responsive>\n  );\n}\n\nexport default function Map (props) {\n  const { api } = useSubstrate();\n  return api && api.query && api.query.encointerCurrencies ? <MapMain {...props} /> : null;\n}\n","import React from 'react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\n\nimport 'semantic-ui-css/semantic.min.css';\nimport { SubstrateContextProvider, useSubstrate } from './substrate-lib';\n\nimport Map from './Map';\nimport './style.css';\n\nfunction Main () {\n  const { apiState, keyringState } = useSubstrate();\n\n  const loader = text => (\n    <Dimmer active>\n      <Loader size='small'>{text}</Loader>\n    </Dimmer>\n  );\n\n  if (apiState === 'ERROR') return loader('Error connecting to the blockchain');\n  else if (apiState !== 'READY') return loader('Connecting to the blockchain');\n\n  if (keyringState !== 'READY') {\n    return loader(\n      \"Loading accounts (please review any extension's authorization)\"\n    );\n  }\n\n  return (<Map debug />);\n}\n\nexport default function App () {\n  return (\n    <SubstrateContextProvider>\n      <Main />\n    </SubstrateContextProvider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}